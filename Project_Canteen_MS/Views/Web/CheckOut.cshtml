@model Project_Canteen_MS.Models.Order
@{
    ViewBag.Title = "CheckOut";
    Layout = "~/Views/Shared/_WebPage.cshtml";
    Project_Canteen_MS.Models.Cart cart = Session["Cart"] != null ? (Project_Canteen_MS.Models.Cart)Session["Cart"] : new Project_Canteen_MS.Models.Cart();
}


@if (cart.CartItems.Count > 0)
{
    <div class="all-page-title page-breadcrumb">
        <div class="container text-center">
            <div class="row">
                <div class="col-lg-12">
                    <h1>Kiểm tra đơn hàng</h1>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row" style="padding-bottom:100px;padding-top:100px">
            <div class="col-md-8">
                @{ Html.BeginForm("CreateOrder");}
                <div class="form-group">
                    @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(model => model.Telephone, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.Telephone, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.Telephone, "", new { @class = "text-danger" })
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(model => model.Address, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.Address, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.Address, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-danger">Create Order</button>
                </div>
                @{ Html.EndForm();}
            </div>
            <div class="col-md-4 " style="border: 1px solid #808080; height:100%">
                <table class="table">
                    <thead>
                    <th>Product name</th>
                    <th>Price</th>
                    <th>Qty</th>
                    <th>Subtotal</th>
                    </thead>
                    <tbody>

                        @foreach (var item in cart.CartItems)
                        {
                            var sub = item.Qty * item.Product.Price;
                            <tr>
                                <td>@item.Product.Name</td>
                                <td>@item.Product.Price</td>
                                <td>@item.Qty</td>
                                <td>@sub</td>
                            </tr>
                        }
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="3">Grand Total</td>
                            <td>@cart.GrandTotal</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>


}
else
{
<div class="all-page-title page-breadcrumb">
    <div class="container text-center">
        <div class="row">
            <div class="col-lg-12">
                <h1>Không có đơn hàng nào !</h1>
            </div>
        </div>
    </div>
</div>

}